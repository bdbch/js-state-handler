(function(a,b){if('function'==typeof define&&define.amd)define(['module','dompurify'],b);else if('undefined'!=typeof exports)b(module,require('dompurify'));else{var c={exports:{}};b(c,a.dompurify),a.StateHandler=c.exports}})(this,function(a,b){'use strict';function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var e='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];d(this,a),this.data=Object.assign({},this.sanitize(b)),this.initialState=b,this.functions=[],c&&this.addToRenderer(c)}return f(a,[{key:'set',value:function(a){var b=Object.keys(a),c=this.functions.filter(function(a){return 0!==a.keys.filter(function(a){return-1<b.indexOf(a)}).length}).map(function(a){return a.method});Object.assign(this.data,this.sanitize(a)),this.render(c)}},{key:'reset',value:function(){Object.assign(this.data,this.initialState),this.render(this.functions)}},{key:'render',value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],b=a||this.functions.map(function(a){return a.method}),c=!0,d=!1,e=void 0;try{for(var f,g,h=b[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)g=f.value,g()}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}}},{key:'addToRenderer',value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!a&&'function'!=typeof a&&'object'!==('undefined'==typeof a?'undefined':e(a)))return console.error('Please provide a function or an array of functions to add them to the renderer'),!1;if('object'===('undefined'==typeof a?'undefined':e(a))){var b=!0,c=!1,d=void 0;try{for(var f,g,h=a[Symbol.iterator]();!(b=(f=h.next()).done);b=!0){if(g=f.value,'function'!=typeof g.method)return console.error('The provided data is not a function.'),!1;'*'===g.keys&&(g.keys=Object.keys(this.data)),this.functions.push(g)}}catch(a){c=!0,d=a}finally{try{!b&&h.return&&h.return()}finally{if(c)throw d}}}else'*'===a.keys&&(a.keys=Object.keys(this.data)),this.functions.push(a)}},{key:'pushNewState',value:function(a,b){a=[].concat(c(a),[b])}},{key:'sanitize',value:function(a){var c=Object.assign({},a);for(var d in c)c[d].sanitize&&(c[d].value instanceof Array?c[d].value.forEach(function(a,c,d){d[c]=b.sanitize(a)}):c[d].value=b.sanitize(c[d].value));return c}}]),a}();a.exports=g});
